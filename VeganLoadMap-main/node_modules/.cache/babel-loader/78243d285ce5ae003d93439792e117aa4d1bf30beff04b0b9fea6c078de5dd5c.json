{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nexport default {\n  methods: {\n    requestPay: function () {\n      const {\n        IMP\n      } = window;\n      IMP.init('imp70364071');\n      IMP.request_pay({\n        // param\n        pg: \"kcp.INIBillTst_inicis\",\n        // pg사 구분코드\n        pay_method: \"card\",\n        // 결제수단 구분코드\n        merchant_uid: \"vrm_wando_0616_20231031_7\",\n        // 가맹점 주문번호. 40bytes 이하. 매 거래시 다 달라야함.\n        name: \"wando 결제테스트\",\n        // 결제대상 제품명\n        amount: 50,\n        // 결제 금액\n        buyer_email: \"ourbaby7@nate.com\",\n        // \n        buyer_name: \"김도완\",\n        buyer_tel: \"010-1234-5678\",\n        buyer_addr: \"서울특별시 강남구 신사동\",\n        buyer_postcode: \"01181\"\n      }, rsp => {\n        // callback\n        if (rsp.success) {\n          console.log(\"rsp.success => \" + rsp);\n\n          // axios로 HTTP 요청\n          const paymentData = {\n            payment_id: rsp.imp_uid,\n            storename: rsp.merchant_uid,\n            userid: 'wandodododododo',\n            price: 50,\n            status: '123'\n          };\n          axios.post(\"/api/payment\", paymentData).then(data => {\n            // 서버 결제 API 성공시 로직\n            console.log(data);\n            if (data.payment_id != null) alert(data.payment_id + \" 결제 성공!\");\n            this.$router.push({\n              name: \"PaymentSuccess\"\n            });\n          }).catch(error => {\n            // 서버 결제 API 실패시 로직\n            console.log(error);\n            console.log(error.toString());\n            alert(\"서버 결제 API 요청 실패\");\n          });\n        } else {\n          console.log(\"rsp.failed\" + rsp);\n          console.log(\"rsp.failed\" + rsp.error_msg);\n          alert(\"결제에 실패했습니다. 에러 내용 : \" + rsp.error_msg);\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","methods","requestPay","IMP","window","init","request_pay","pg","pay_method","merchant_uid","name","amount","buyer_email","buyer_name","buyer_tel","buyer_addr","buyer_postcode","rsp","success","console","log","paymentData","payment_id","imp_uid","storename","userid","price","status","post","then","data","alert","$router","push","catch","error","toString","error_msg"],"sources":["C:\\Ucamp\\VeganProject\\VeganLoadMap-main\\VeganLoadMap-main\\src\\components\\payment\\Payment.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <button @click=\"requestPay\">결제하기</button>\r\n    <!-- 결제하기 버튼 생성 -->\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  methods: {\r\n    requestPay: function () {\r\n\r\n      const { IMP } = window;\r\n\r\n      IMP.init('imp70364071');\r\n\r\n      IMP.request_pay({ // param\r\n        pg: \"kcp.INIBillTst_inicis\",  // pg사 구분코드\r\n        pay_method: \"card\", // 결제수단 구분코드\r\n        merchant_uid: \"vrm_wando_0616_20231031_7\",  // 가맹점 주문번호. 40bytes 이하. 매 거래시 다 달라야함.\r\n        name: \"wando 결제테스트\",  // 결제대상 제품명\r\n        amount: 50, // 결제 금액\r\n        buyer_email: \"ourbaby7@nate.com\", // \r\n        buyer_name: \"김도완\",\r\n        buyer_tel: \"010-1234-5678\",\r\n        buyer_addr: \"서울특별시 강남구 신사동\",\r\n        buyer_postcode: \"01181\"\r\n      }, rsp => { // callback\r\n        if (rsp.success) {\r\n          console.log(\"rsp.success => \" + rsp)\r\n\r\n          // axios로 HTTP 요청\r\n          const paymentData = {\r\n            payment_id: rsp.imp_uid,\r\n            storename: rsp.merchant_uid,\r\n            userid: 'wandodododododo',\r\n            price: 50,\r\n            status: '123',\r\n          };\r\n\r\n              axios.post(\"/api/payment\", paymentData)\r\n              .then((data) => {\r\n                // 서버 결제 API 성공시 로직\r\n                console.log(data)\r\n                if(data.payment_id != null)\r\n                alert(data.payment_id + \" 결제 성공!\");\r\n\r\n                this.$router.push({ name: \"PaymentSuccess\" })\r\n\r\n              })\r\n              .catch((error) => {\r\n                // 서버 결제 API 실패시 로직\r\n                console.log(error)\r\n                console.log(error.toString())\r\n                alert(\"서버 결제 API 요청 실패\");\r\n              });\r\n\r\n\r\n        } else {\r\n\r\n          console.log(\"rsp.failed\" + rsp)\r\n          console.log(\"rsp.failed\" + rsp.error_msg)\r\n          alert(\"결제에 실패했습니다. 에러 내용 : \" + rsp.error_msg)\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>"],"mappings":";AASA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,OAAO,EAAE;IACPC,UAAU,EAAE,SAAAA,CAAA,EAAY;MAEtB,MAAM;QAAEC;MAAI,IAAIC,MAAM;MAEtBD,GAAG,CAACE,IAAI,CAAC,aAAa,CAAC;MAEvBF,GAAG,CAACG,WAAW,CAAC;QAAE;QAChBC,EAAE,EAAE,uBAAuB;QAAG;QAC9BC,UAAU,EAAE,MAAM;QAAE;QACpBC,YAAY,EAAE,2BAA2B;QAAG;QAC5CC,IAAI,EAAE,aAAa;QAAG;QACtBC,MAAM,EAAE,EAAE;QAAE;QACZC,WAAW,EAAE,mBAAmB;QAAE;QAClCC,UAAU,EAAE,KAAK;QACjBC,SAAS,EAAE,eAAe;QAC1BC,UAAU,EAAE,eAAe;QAC3BC,cAAc,EAAE;MAClB,CAAC,EAAEC,GAAE,IAAK;QAAE;QACV,IAAIA,GAAG,CAACC,OAAO,EAAE;UACfC,OAAO,CAACC,GAAG,CAAC,iBAAgB,GAAIH,GAAG;;UAEnC;UACA,MAAMI,WAAU,GAAI;YAClBC,UAAU,EAAEL,GAAG,CAACM,OAAO;YACvBC,SAAS,EAAEP,GAAG,CAACR,YAAY;YAC3BgB,MAAM,EAAE,iBAAiB;YACzBC,KAAK,EAAE,EAAE;YACTC,MAAM,EAAE;UACV,CAAC;UAEG3B,KAAK,CAAC4B,IAAI,CAAC,cAAc,EAAEP,WAAW,EACrCQ,IAAI,CAAEC,IAAI,IAAK;YACd;YACAX,OAAO,CAACC,GAAG,CAACU,IAAI;YAChB,IAAGA,IAAI,CAACR,UAAS,IAAK,IAAI,EAC1BS,KAAK,CAACD,IAAI,CAACR,UAAS,GAAI,SAAS,CAAC;YAElC,IAAI,CAACU,OAAO,CAACC,IAAI,CAAC;cAAEvB,IAAI,EAAE;YAAiB,CAAC;UAE9C,CAAC,EACAwB,KAAK,CAAEC,KAAK,IAAK;YAChB;YACAhB,OAAO,CAACC,GAAG,CAACe,KAAK;YACjBhB,OAAO,CAACC,GAAG,CAACe,KAAK,CAACC,QAAQ,CAAC,CAAC;YAC5BL,KAAK,CAAC,iBAAiB,CAAC;UAC1B,CAAC,CAAC;QAGR,OAAO;UAELZ,OAAO,CAACC,GAAG,CAAC,YAAW,GAAIH,GAAG;UAC9BE,OAAO,CAACC,GAAG,CAAC,YAAW,GAAIH,GAAG,CAACoB,SAAS;UACxCN,KAAK,CAAC,sBAAqB,GAAId,GAAG,CAACoB,SAAS;QAC9C;MACF,CAAC,CAAC;IACJ;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}