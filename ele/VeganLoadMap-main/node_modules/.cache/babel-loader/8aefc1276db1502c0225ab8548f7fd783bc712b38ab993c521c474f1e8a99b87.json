{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { reactive } from \"vue\";\nimport axios from \"axios\";\nimport router from \"@/scripts/router\";\nimport Header2 from \"@/components/header/Header2.vue\";\nexport default {\n  name: \"ShopInsert\",\n  components: {\n    Header2\n  },\n  methods: {\n    onFileChange() {\n      this.selectedFile = this.$refs.fileInput.files[0];\n      // const name = this.selectedFile.name;\n      const formData = new FormData();\n      formData.append(\"file\", this.selectedFile);\n      axios.post(\"/api/images/upload\", formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      });\n      // window.open(`/api/images/download/${name}`);\n      this.state.form.image = this.selectedFile.name;\n    }\n  },\n  data() {\n    return {\n      selectedFile: null\n    };\n  },\n  setup() {\n    const state = reactive({\n      flag: 0,\n      form: {\n        id: \"\",\n        password: \"\",\n        name: \"\",\n        email: \"\",\n        tel: \"\",\n        storename: \"\",\n        storenumber: \"\",\n        storefile: \"\"\n      }\n    });\n    const exist = exist => {\n      if (state.form.id == \"\") {\n        window.alert(\"아이디를 입력해주세요\");\n        router.push({\n          path: \"/join2\"\n        });\n      } else {\n        axios.get(`/api/store/join/${exist}`).then(res => {\n          if (res.data == 0) {\n            window.alert(\"중복된 아이디입니다. 다시 입력해주세요\");\n          } else {\n            window.alert(\"사용 가능한 아이디입니다\");\n            state.flag = 1;\n          }\n          router.push({\n            path: \"/join2\"\n          });\n        });\n      }\n    };\n    const register = () => {\n      if (state.form.id == \"\") {\n        window.alert(\"아이디를 입력해주세요\");\n        router.push({\n          path: \"/join2\"\n        });\n      } else if (state.flag != 1) {\n        window.alert(\"아이디를 중복 검사해주세요\");\n        router.push({\n          path: \"/join2\"\n        });\n      } else if (state.form.password == \"\") {\n        window.alert(\"비밀번호를 입력해주세요\");\n        router.push({\n          path: \"/join2\"\n        });\n      } else if (state.form.name == \"\") {\n        window.alert(\"이름을 입력해주세요\");\n        router.push({\n          path: \"/join2\"\n        });\n      } else if (state.form.email == \"\") {\n        window.alert(\"이메일을 입력해주세요\");\n        router.push({\n          path: \"/join2\"\n        });\n      } else if (state.form.tel == \"\") {\n        window.alert(\"전화번호를 입력해주세요\");\n        router.push({\n          path: \"/join2\"\n        });\n      } else if (state.form.storename == \"\") {\n        window.alert(\"가게 이름을 입력해주세요\");\n        router.push({\n          path: \"/join2\"\n        });\n      } else if (state.form.storenumber == \"\") {\n        window.alert(\"사업자 등록 번호를 입력해주세요\");\n        router.push({\n          path: \"/join2\"\n        });\n      } else if (state.form.storefile == \"\") {\n        window.alert(\"사업자 등록증을 업로드해주세요\");\n        router.push({\n          path: \"/join2\"\n        });\n      } else {\n        axios.post(\"/api/store/join\", state.form).then(() => {\n          window.alert(\"회원가입 되었습니다\");\n          router.push({\n            path: \"/login2\"\n          });\n        });\n      }\n    };\n    return {\n      state,\n      register,\n      exist\n    };\n  }\n};","map":{"version":3,"names":["reactive","axios","router","Header2","name","components","methods","onFileChange","selectedFile","$refs","fileInput","files","formData","FormData","append","post","headers","state","form","image","data","setup","flag","id","password","email","tel","storename","storenumber","storefile","exist","window","alert","push","path","get","then","res","register"],"sources":["/Users/soohykim/Desktop/front/src/components/user_store/ShopInsert.vue"],"sourcesContent":["<template>\n  <Header2 />\n  <div class=\"card shadow-sm\" id=\"cat\">\n    <div class=\"card-body\" >\n      <div><h2 class=\"cattitle\">가게 신규 등록</h2></div>\n      <div>\n        <ul>\n          <hr>\n          <div  class=\"memberform\">\n            <b></b><br>\n            <b>가게 이름</b><input type=\"text\" placeholder=\"상호명\" id=\"storename\" v-model=\"state.form.storename\" required/><br>\n            <b>가게 정보</b><input type=\"text\" placeholder=\"가게 소개\" id=\"detailinfo\" v-model=\"state.form.detailinfo\" /><br>\n            <b>카테고리</b><input type=\"text\" placeholder=\"한식/중식/양식/퓨전/카페\" id=\"category\" v-model=\"state.form.category\" /><br>\n            <b>가게 위치</b><input type=\"text\" placeholder=\"주소\" id=\"location\" v-model=\"state.form.location\" /><br>\n            <b>가게 전화번호</b><input type=\"text\" placeholder=\"가게 전화번호 (- 없이 입력)\" id=\"phonenumber\" v-model=\"state.form.phonenumber\" /><br>\n            <b>가게 이미지 파일 첨부</b><input type=\"file\" ref=\"fileInput\" @change=\"onFileChange\" /><br>\n            <hr>\n\n            <hr>\n            <button text=\"button\" class=\"bookbtn\" @click=\"register()\">등록</button>\n          </div>\n        </ul>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport {reactive} from \"vue\";\nimport axios from \"axios\";\nimport router from \"@/scripts/router\";\nimport Header2 from \"@/components/header/Header2.vue\";\n\nexport default {\n  name: \"ShopInsert\",\n  components: {Header2},\n  methods: {\n    onFileChange() {\n      this.selectedFile = this.$refs.fileInput.files[0];\n      // const name = this.selectedFile.name;\n      const formData = new FormData();\n      formData.append(\"file\", this.selectedFile);\n      axios.post(\"/api/images/upload\", formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n        },\n      });\n      // window.open(`/api/images/download/${name}`);\n      this.state.form.image = this.selectedFile.name;\n    }\n  },\n  data() {\n    return {\n      selectedFile: null,\n    };\n  },\n  setup() {\n    const state = reactive({\n      flag: 0,\n      form :{\n        id: \"\",\n        password: \"\",\n        name: \"\",\n        email: \"\",\n        tel: \"\",\n        storename: \"\",\n        storenumber: \"\",\n        storefile: \"\"\n      }\n    })\n\n    const exist = (exist) => {\n      if (state.form.id == \"\") {\n        window.alert(\"아이디를 입력해주세요\");\n        router.push({path: \"/join2\"});\n      } else {\n        axios.get(`/api/store/join/${exist}`, ).then((res)=> {\n          if (res.data == 0) {\n            window.alert(\"중복된 아이디입니다. 다시 입력해주세요\");\n          } else {\n            window.alert(\"사용 가능한 아이디입니다\");\n            state.flag = 1;\n          }\n          router.push({path: \"/join2\"});\n        })\n      }\n    }\n    const register = () => {\n      if (state.form.id == \"\") {\n        window.alert(\"아이디를 입력해주세요\");\n        router.push({path: \"/join2\"});\n      } else if (state.flag != 1) {\n        window.alert(\"아이디를 중복 검사해주세요\");\n        router.push({path: \"/join2\"});\n      } else if (state.form.password == \"\") {\n        window.alert(\"비밀번호를 입력해주세요\");\n        router.push({path: \"/join2\"});\n      } else if (state.form.name == \"\") {\n        window.alert(\"이름을 입력해주세요\");\n        router.push({path: \"/join2\"});\n      } else if (state.form.email == \"\") {\n        window.alert(\"이메일을 입력해주세요\");\n        router.push({path: \"/join2\"});\n      } else if (state.form.tel == \"\") {\n        window.alert(\"전화번호를 입력해주세요\");\n        router.push({path: \"/join2\"});\n      } else if (state.form.storename == \"\") {\n        window.alert(\"가게 이름을 입력해주세요\");\n        router.push({path: \"/join2\"});\n      } else if (state.form.storenumber == \"\") {\n        window.alert(\"사업자 등록 번호를 입력해주세요\");\n        router.push({path: \"/join2\"});\n      } else if (state.form.storefile == \"\") {\n        window.alert(\"사업자 등록증을 업로드해주세요\");\n        router.push({path: \"/join2\"});\n      } else {\n        axios.post(\"/api/store/join\", state.form).then(()=> {\n          window.alert(\"회원가입 되었습니다\");\n          router.push({path: \"/login2\"});\n        })\n      }\n    }\n    return {state, register, exist}\n  }\n}\n</script>\n\n<style scoped>\n.datepicker-container {\n  width: 40%;\n  padding: 30px 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.datepicker {\n  padding : 20px 5px;\n}\n\n.formatDate {\n  margin-top: 10px;\n}\n.fieldbook div{\n  display: flex;\n  gap:10px;\n}\n.field{\n  gap:10px;\n}\n.utime {\n  display: flex;\n  align-items: center;\n  padding: 10px;\n}\n\n.time {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n}\n\n.time button {\n  margin: 0;\n}\n#timebtn{\n  padding : 10px;\n  border-radius: 8px;\n  border : 3px solid lightgray;\n}\n.memberform input:not(input[type=radio]){\n  border: 1px solid #dadada;\n  padding: 15px;\n  width: 100%;\n  margin-bottom: 5px;\n  border-radius: 6px;\n}\n.memberform{\n  padding : 0 30px 30px 30px;\n}\n.bookbtn{\n  background-color: darkolivegreen;\n  color: white;\n  padding: 15px;\n  width: 100%;\n  margin-bottom: 5px;\n  border-radius: 6px;\n  font-weight: 700;\n  font-size: 15px;\n  border : 1px solid white;\n}\n#cat{\n  width : 60%;\n  height : auto;\n  margin : auto;\n  text-align: left;\n}\n.cattitle{\n  padding : 20px;\n  font-weight: 700;\n}\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}